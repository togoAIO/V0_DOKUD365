<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Default financial dimensions | WIKA Documentation </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Default financial dimensions | WIKA Documentation ">
    <meta name="generator" content="docfx 2.58.0.0">
    
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../toc.html">
    
    <meta property="docfx:rel" content="../../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../../../index.html">
                <img id="logo" class="svg" src="../../../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="default-financial-dimensions">Default financial dimensions</h1>

[!include[banner](../includes/banner.md)]
<p>This topic explains default financial dimensions for developers. It explains where the dimensions originate, the application programming interfaces (APIs) that are used to merge them, and how they are used to create ledger dimensions. The topic includes examples that show the user interface (UI), SQL table queries, and the output of those queries. It also includes some explanation of APIs and examples of how they are used.</p>
<p>This topic uses examples from the <strong>USMF</strong> demo data company.</p>
<p>For conceptual information about financial dimensions and how they affect business processes, see <a href="../../../finance/general-ledger/financial-dimensions.md">Financial dimensions</a>.</p>
<h3 id="entering-default-dimensions">Entering default dimensions</h3>
<p>More than 250 pages let you enter default financial dimensions. The dimensions are shown on a FastTab that lists them together with values and descriptions. In standard demo data, more than 30 dimensions are available. However, the following example of a <strong>Financial dimensions</strong> FastTab shows just five dimensions: BusinessUnit, CostCenter, Department, ItemGroup, and Project.</p>
<p><img src="media/DefaultDimensionEntry.png" alt="Financial dimensions FastTab." title="Financial dimensions FastTab"></p>
<h3 id="dimensions-list">Dimensions list</h3>
<p>The dimensions are first filtered based on the list of all active account structures that are associated with the ledger of the current company or the company that is specified on the page. Next, a union of all the dimensions in those account structures, plus all active advanced rules that are associated with those structures, is obtained.</p>
<p><img src="media/FinancialDimensionList.png" alt="Financial dimensions list." title="Financial dimensions list"></p>
<h3 id="ledger-page">Ledger page</h3>
<p>On the <strong>Ledger</strong> page (<strong>General Ledger &gt; Setup &gt; Ledger</strong>), you can maintain the account structures for a company.</p>
<p><img src="media/LedgerStructureConfiguration.png" alt="Ledger page for the USMF company." title="Ledger page for the USMF company"></p>
<h3 id="account-structures-where-the-number-of-dimensions-varies">Account structures where the number of dimensions varies</h3>
<p>To determine how many dimensions an account structure uses, select it on the <strong>Ledger</strong> page, select <strong>Configure account structure</strong> above the grid, and then count the columns. The following illustrations show one account structure that uses three dimensions and another account structure that uses five dimensions.</p>
<p><strong>Account structure that uses three dimensions</strong></p>
<p><img src="media/BalanceSheetAccountStructureSetup.png" alt="Setup of the Balance sheet account structure for the USMF company." title="Setup of the Balance sheet account structure for the USMF company"></p>
<p><strong>Account structure that uses five dimensions</strong></p>
<p><img src="media/PandLAccountStructureSetup.png" alt="Setup of the Profit and loss account structure for the USMF company." title="Setup of the Profit and loss account structure for the USMF company"></p>
<p>Between the two account structures that are shown in the preceding illustrations, there are four unique dimensions: BusinessUnit, Department, CostCenter, and ItemGroup. These four dimensions will appear in the list of default dimensions. In addition, dimensions from advanced rule structures that are linked to the account structures through advanced rules are examined. In this example, the examination of dimensions from advanced rule structures causes a fifth dimension, Project, to be added to the list of default dimensions.</p>
<p>The following illustration shows the advanced rule that causes the Project dimension to be included in the list of default dimensions.</p>
<p><img src="media/AdvancedRuleLinked.png" alt="Advanced rule that is linked to the Profit and loss account structure." title="Advanced rule that is linked to the Profit and loss account structure"></p>
<p>The following illustration shows the rule structure.</p>
<p><img src="media/RuleStructure.png" alt="Rule structure for Project." title="Rule structure for Project"></p>
<p>Note that the MainAccount dimension isn't shown in most lists of default dimensions. However, Budgeting is the exception. It does explicitly include the MainAccount dimension in the list of default dimensions.</p>
<h3 id="api-for-the-list-of-default-dimensions">API for the list of default dimensions</h3>
<p>The default dimension controller, <strong>DimensionDefaultingController</strong>, uses the <strong>DimensionCache::getDimensionAttributeSetForLedger()</strong> API to determine which dimensions are applicable to a company.</p>
<h2 id="control-uptake-and-storage">Control uptake and storage</h2>
<h3 id="form-uptake-and-the-dimensions-data-model">Form uptake and the dimensions data model</h3>
<p>All pages that show default dimensions use the <strong>DimensionDefaultingController</strong> controller. This controller automatically shows dimensions, and loads and saves values and user interactions. For information about these uptake patterns, see the <a href="https://go.microsoft.com/fwlink/?linkid=213133">Implementing the Account and Financial Dimensions Framework for Microsoft Dynamics AX 2012 Applications</a> white paper.</p>
<h3 id="storage-of-default-dimension-values">Storage of default dimension values</h3>
<p>The values that are associated with the dimensions are stored in a table that is separate from the primary table that references those dimension values. For example, the LedgerJournalTable table has a <strong>DimensionDefault</strong> column that holds a foreign key reference to a record in the DimensionAttributeValueSet table. This record is the parent record that represents the set of values that is shown.</p>
<p><img src="media/Part2DefaultDimensionEntry.png" alt="Default dimension values." title="Default dimension values"></p>
<p>Each value is stored as a separate row in the DimensionAttributeValueSetItem table and has the same parent record foreign key.</p>
<p><img src="media/SQLResultofAllDefaultDimensionValues.png" alt="SQL results of all default dimension values." title="SQL results of all default dimension values"></p>
<p>The data can be queried directly through these tables. Alternatively, it can be queried by using <strong>DimensionAttributeValueSetItemView</strong>, as shown in the following illustration.</p>
<p><img src="media/SQLofAllDefaultDimensionValues.png" alt="Querying data by using DimensionAttributeValueSetItemView." title="Querying data by using DimensionAttributeValueSetItemView"></p>
<h3 id="empty-values">Empty values</h3>
<p>The dimension framework stores rows only for dimensions that a value has been entered for. No data is stored for empty rows. Therefore, after data is persisted, the framework can't distinguish a dimension that didn't have a value from a dimension that did have a value, but it was cleared by a user. To save an empty value, you must create a real value and give it a name that indicates that it's empty. For example, name it <strong>empty</strong>, <strong>n/a</strong>, <strong>&lt;cleared&gt;</strong>, or <strong>*blank*</strong>. Users can then select this value at entry time to affect the defaulting behavior as they desire.</p>
<h3 id="immutable-data">Immutable data</h3>
<p>Like most dimension data, the records that are inserted into the tables that were mentioned earlier are immutable. They are initially written, but then never subsequently updated or deleted. For example, a user adds a project ID as a dimension and then saves the change.</p>
<p><img src="media/Part2-1DefaultDimensionEntry.png" alt="Default dimension entry and one added value." title="Default dimension entry and one added value"></p>
<p>In this case, the SQL query will still return the same three rows as shown previously even though a new row was added. When a new value was added the dimension framework created a new value set record and four additional value set item records that are linked to the new value set rather than change the previous dimension set.</p>
<p><img src="media/Part2SQLResultsValueSet.png" alt="SQL query and output (column-trimmed) for all default dimension values in the new set." title="SQL query and (column trimmed) output for all default dimension values in the new set"></p>
<h2 id="copy-patterns">Copy patterns</h2>
<p>This section explains how default dimensions are copied between entities.</p>
<h3 id="copy-vs-merge">Copy vs. merge</h3>
<p>Default dimensions are typically copied or merged with other dimension combinations to create ledger account dimensions. The dimension framework doesn't set the precedence for defaulting behavior. Each page or process determines the precedence, based on the requirements of its business logic.</p>
<p>A hypothetical order document will serve as the basis for the examples that follow. This document might be a customer sales order that contains services as line items. Alternatively, it might be a vendor purchase order that contains inventory items as line items. Default dimensions can be entered or overridden at various points in the processing, as the following illustration shows.</p>
<p><img src="media/DefaultDimensionSourcesGraph.png" alt="Default dimension sources on a typical document." title="Default dimension sources on a typical document"></p>
<p>For an order document, multiple default dimensions are available for the business logic to consider. The document header might have a set of default dimensions, as in the case of the purchase order that is used in this example. The customer or, in this example, the vendor for the order also has a set of default dimensions. Depending on the business logic of the order, these various sets of default dimensions might have different precedence when they are combined. Some default dimensions might have higher precedence and replace other default dimensions. However, some default dimensions might be merged together.</p>
<h3 id="copying-default-dimensions">Copying default dimensions</h3>
<p>The following illustration shows a default dimension that is entered on a specific vendor account.</p>
<p><img src="media/DefaultDimensionVendor.png" alt="Default dimension entered on a specific vendor account." title="Default dimension entered on a specific vendor account"></p>
<p>The following illustration shows the SQL query for the default dimension reference on the vendor record.</p>
<p><img src="media/DefaultDimensions3-SQLVendor.png" alt="SQL query for the default dimension reference on the vendor record." title="SQL query for the default dimension reference on the vendor record"></p>
<p>The following illustration shows the default dimension that is created.</p>
<p><img src="media/DefaultDimensions3-SQLResultVendor.png" alt="Resulting default dimension." title="Resulting default dimension"></p>
<p>The following illustration shows a new purchase order that is created for this vendor. The default dimension is copied to the document header.</p>
<p><img src="media/DefaultDimensions3-CopiedToDocHeader.png" alt="Default dimension copied to a document header (purchase order)." title="Default dimension copied to a document header (purchase order)"></p>
<p>The following illustration shows the SQL query and default dimension reference on the header record.</p>
<p><img src="media/DefaultDimensions3-SQLCopiedToDocHeader.png" alt="SQL query and output that shows default dimensions on a purchase order record." title="SQL query and output showing default dimensions on a purchase order record"></p>
<p>As the following illustration shows, as soon as a vendor is selected, the dimensions from the vendor replaces any dimensions that were already on the purchase order header.</p>
<p><img src="media/DefaultDimensions3-SQLResultCopiedToDocHeader.png" alt="Default dimensions copied from the vendor."></p>
<p>Therefore, the default dimension foreign key just had to be copied. The following illustration shows the code that is used to copy default dimensions from the vendor to the purchase order.</p>
<p><img src="media/DefaultDimensions3-6CodetoCopy.png" alt="Code used to copy default dimensions from the vendor to the purchase order." title="Code used to copy default dimensions from the vendor to the purchase order"></p>
<p>The following illustration shows the header dimensions after a user enters a value for the Project dimension.</p>
<p><img src="media/DefaultDimensions3-7DocumentHeader.png" alt="Default dimension modified by a user on a document header (purchase order)." title="Default dimension modified by a user on a document header (purchase order)"></p>
<p>The following code shows the SQL query for the default dimension reference on the header record.</p>
<pre><code class="lang-sql">SELECT RecID, PURCHID, DEFAULTDIMENSION from PurchTable
WHERE PURCHID = '00000125' and DATAAREAID = 'usmf'

SELECT DA.NAME, DISPLAYVALUE, V.DIMENSIONATTRIBUTEVALUESET,
V.SETITEMRECID
FROM DIMENSIONATTRIBUTEVALUESETITEMVIEW V
JOIN DIMENSIONATTRIBUTE DA ON DA.RECID = V.DIMENSIONATTRIBUTE
WHERE V.DIMENSIONATTRIBUTEVALUESET = 52565466755
</code></pre>
<p>The following illustration shows the default dimension that is created.</p>
<p><img src="media/DefaultDimensions3-8SQLResultModifiedDocHearder.png" alt="Output showing updated default dimensions on purchase order record."></p>
<p>When the user switches to the <strong>Line</strong> view to enter lines, default dimensions are copied from the purchase order header, as the following illustration shows.</p>
<p><img src="media/DefaultDimensions3-9CopiedToLine.png" alt="Default dimensions copied to a document line (purchase order line)." title="Default dimensions copied to a document line (purchase order line)"></p>
<p>The following illustration shows the code that is used to copy the foreign key reference to the line. In this case, the line hasn't yet been saved. Therefore, the default dimension foreign key appears only in the table buffer in memory.</p>
<p><img src="media/DefaultDimensions3-10CodeToCopyToLine.png" alt="Code used to copy default dimensions from the header to the line." title="Code used to copy default dimensions from the header to the line"></p>
<h2 id="merging-patterns">Merging patterns</h2>
<p>This section explains how default dimensions are merged between entities.</p>
<h3 id="merging-default-dimensions">Merging default dimensions</h3>
<p>In the following illustration, the user has manually cleared the BusinessUnit dimension on the line. Therefore, a new default dimension foreign key is created, and the purchase order header is updated.</p>
<p><img src="media/DefaultDimension4-1DimOnLine.png" alt="Default dimension modified on a document line (purchase order line)." title="Default dimension modified on a document line (purchase order line)"></p>
<p>Because the header hasn't yet been saved, the updated foreign key appears only in the table buffer in memory. However, as the following illustrations show, the new default dimension can be queried and found.</p>
<p><img src="media/DefaultDimension4-1SQLDimOnLine.png" alt="SQL query to find the new default dimension." title="SQL query to find the new default dimension"></p>
<p><img src="media/DefaultDimension4-2SQLResultsOnLine.png" alt="Updated default dimensions." title="Updated default dimensions"></p>
<p>Now consider the item that the user will enter on the purchase order line. The following illustration shows the default financial dimensions on the released product.</p>
<p><img src="media/DefaultDimension4-3Item.png" alt="Default dimensions on an item." title="Default dimensions on an item"></p>
<p>The following code shows the SQL query for those default dimensions in the database.</p>
<pre><code class="lang-sql">SELECT ItemId, NAMEALIAS, DefaultDimension from InventTable where ItemId = '1000' AND DATAAREAID = 'USMF'

SELECT DA.NAME, DISPLAYVALUE, V.DIMENSIONATTRIBUTEVALUESET,
V.SETITEMRECID
FROM DIMENSIONATTRIBUTEVALUESETITEMVIEW V
JOIN DIMENSIONATTRIBUTE DA ON DA.RECID = V.DIMENSIONATTRIBUTE
WHERE V.DIMENSIONATTRIBUTEVALUESET = 68719490324
</code></pre>
<p>The following illustration shows the results of the query.</p>
<p><img src="media/DefaultDimension4-4SQLResultsItem.png" alt="Output showing default dimensions on an item record." title="Output showing default dimensions on an item record"></p>
<p>Next, the user enters the item on the purchase order line. The following illustration shows the item selected on the purchase order line and the resulting default dimensions. In this case, the default dimension values were merged by the purchase order logic.</p>
<p><img src="media/DefaultDimension4-5PurchLineResult.png" alt="Merged default dimension values on a document line (purchase order line)."></p>
<p>The following code and illustration show the SQL query and the resulting default dimensions from the item record on the purchase order line.</p>
<pre><code class="lang-sql">SELECT PURCHID, LINENUMBER, ITEMID, DEFAULTDIMENSION from PURCHLINE where PURCHID = '00000100' AND DATAAREAID = 'USMF'

SELECT DA.NAME, DISPLAYVALUE, V.DIMENSIONATTRIBUTEVALUESET,
V.SETITEMRECID
FROM DIMENSIONATTRIBUTEVALUESETITEMVIEW V
JOIN DIMENSIONATTRIBUTE DA ON DA.RECID = V.DIMENSIONATTRIBUTE
WHERE V.DIMENSIONATTRIBUTEVALUESET = 68719490325
</code></pre>
<p><a href="media/DefaultDimension4-6SQLResultOnItem.png"><img src="media/DefaultDimension4-6SQLResultOnItem.png" alt="Output showing default dimensions from an item record on an document line (purchase order line)."></a></p>
<p>When the item is specified for a purchase order line, the purchase order logic merges the default dimensions from three different sources. Consider the following information:</p>
<ul>
<li><p>Default dimensions on the order header are merged with default dimensions on the order line to yield &quot;merged result 1&quot; default dimensions.</p>
<table>
<thead>
<tr>
<th>Item</th>
<th>Order line</th>
<th>Order header</th>
<th>Merged result 1</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>BusinessUnit</strong></td>
<td></td>
<td></td>
<td></td>
<td>The value is blank in both sources.</td>
</tr>
<tr>
<td><strong>CostCenter</strong></td>
<td></td>
<td></td>
<td></td>
<td>The value is blank in both sources.</td>
</tr>
<tr>
<td><strong>Department</strong></td>
<td></td>
<td>027</td>
<td>027</td>
<td>The value is blank on the order line. Therefore, the value is copied from the order header.</td>
</tr>
<tr>
<td><strong>ItemGroup</strong></td>
<td></td>
<td></td>
<td></td>
<td>The value is blank in both sources.</td>
</tr>
<tr>
<td><strong>Project</strong></td>
<td>000003</td>
<td>000003</td>
<td>000003</td>
<td>The value is the same in both sources.</td>
</tr>
<tr>
<td><strong>Foreign key</strong></td>
<td>**6190</td>
<td>*9574</td>
<td>*9574</td>
<td>The merged result uses the same record as the order header.</td>
</tr>
</tbody>
</table>
</li>
<li><p>Default dimensions on the item are merged with the &quot;merged result 1&quot; default dimensions to yield default dimensions on the final order line (&quot;merged result 2&quot; default dimensions). The following table shows the logical steps of the merge that occurs. However, these steps are combined during execution by using the APIs that the dimension framework provides.</p>
<table>
<thead>
<tr>
<th>Item</th>
<th>Merged result 1</th>
<th>Item</th>
<th>Merged result 2</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>BusinessUnit</strong></td>
<td></td>
<td></td>
<td></td>
<td>The value is blank in both sources.</td>
</tr>
<tr>
<td><strong>CostCenter</strong></td>
<td></td>
<td>008</td>
<td>008</td>
<td>The value is blank in the header line merged result. Therefore, the value is copied from the item.</td>
</tr>
<tr>
<td><strong>Department</strong></td>
<td>027</td>
<td>023</td>
<td>027</td>
<td>The value is set in the header line merged result. Therefore, the item is skipped.</td>
</tr>
<tr>
<td><strong>ItemGroup</strong></td>
<td></td>
<td>AudioRM</td>
<td>AudioRM</td>
<td>The value is blank in the header line merged result. Therefore, the value is copied from the item.</td>
</tr>
<tr>
<td><strong>Project</strong></td>
<td>000003</td>
<td></td>
<td>000003</td>
<td>The value is set in the header line merged result.</td>
</tr>
<tr>
<td><strong>Foreign key</strong></td>
<td>*6190</td>
<td>**0324</td>
<td>**0325</td>
<td>A new record ID is used for the merged result.</td>
</tr>
</tbody>
</table>
</li>
</ul>
<p>The following illustration shows the code that is required in order to merge the dimensions from the three sources.</p>
<p><a href="media/DefaultDimension4-8CodeToMerge.png"><img src="media/DefaultDimension4-8CodeToMerge.png" alt="Code to merge dimensions from the order header, order line, and item."></a></p>
<h2 id="creating-ledger-dimensions">Creating ledger dimensions</h2>
<p>This section explains how default dimensions can be merged to create new ledger dimensions.</p>
<p>Default dimensions provide values that will be used later to create ledger account combinations that are used in journals and accounting distributions. A ledger account combination is just a set of MainAccount and dimension values that structure and order are applied to. For more information, see <a href="LedgerAccountCombinations.html#part-5-ledger-dimensions">Part 5: Ledger dimensions</a></p>
<p>Default dimensions provide all the dimensions, except MainAccount, that are required for a ledger account combination. Default dimensions can be combined with a default account, or they can be combined another ledger dimension to produce a ledger dimension.</p>
<p>The following illustrations show an example where accounting distributions are being done from the purchase order line. The user selects <strong>Financials &gt; Distribute amounts</strong> from the purchase order line to open the <strong>Accounting distributions</strong> page. On that page, a default ledger account combination, <strong>618900--027-008-AudioRM</strong>, is already entered.</p>
<p><a href="media/DefaultDimension5-1AccountingDistributions.png"><img src="media/DefaultDimension5-1AccountingDistributions.png" alt="Distribute amounts command."></a></p>
<p><a href="media/DefaultDimension5-1AcctDistForm.png"><img src="media/DefaultDimension5-1AcctDistForm.png" alt="Accounting distributions page."></a></p>
<p>The values for the Project, CostCenter, ItemGroup, and Department dimensions have been filled in to the accounting distribution. Additionally, the default MainAccount value from the posting item group has been entered on the item as the purchase expenditure for expense account for a purchase order, as the following illustration shows. The project isn't shown because it isn't part of the applicable account structure.</p>
<p><a href="media/DefaultDimension5-1SourceofMainAccountOnPO.png"><img src="media/DefaultDimension5-1SourceofMainAccountOnPO.png" alt="Released product details page."></a></p>
<p><a href="media/DefaultDimension5-1SourceOfMAonPO2.png"><img src="media/DefaultDimension5-1SourceOfMAonPO2.png" alt="Details of the Consume item group."></a></p>
<p>The following illustrations show the query and the resulting default account source.</p>
<p><img src="media/DefaultDimension5-3SQLDefaultSource.png" alt="SQL query." title="SQL query"></p>
<p><img src="media/DefaultDimension5-3SQLResultDefaultSource.png" alt="Results showing the default account source." title="Results showing the default account source"></p>
<p>The following illustration shows the code that is required in order to merge the default dimension on the purchase order line with the default account from the item group.</p>
<p><img src="media/DefaultDimension5-4CodeToMerge.png" alt="Code used to merge the default dimension with a default account." title="Code used to merge the default dimension with a default account"></p>
<p>After the merge is completed, a new ledger account combination is created, as the query in the following illustration shows. This behavior resembles the behavior when default dimensions are merged with each other.</p>
<p><img src="media/DefaultDimension5-5SQLResultMerged.png" alt="SQL query and results showing a merged default account and default dimension." title="SQL query and results showing a merged default account and default dimension"></p>
<h2 id="common-pattern-apis">Common pattern APIs</h2>
<p>This section describes the APIs that are used for the most common defaulting patterns.</p>
<h3 id="default-dimension-apis">Default dimension APIs</h3>
<p>The <strong>DimensionDefaultFacade</strong> and <strong>LedgerDimensionDefaultFacade</strong> classes provide the APIs that are required for defaulting scenarios. The <strong>LedgerDimensionFacade</strong> class contains methods for working with ledger dimensions. The methods are highly optimized for performance.</p>
<h3 id="default-dimensions">Default dimensions</h3>
<h4 id="servicemergedefaultdimensions">serviceMergeDefaultDimensions()</h4>
<p>The <strong>serviceMergeDefaultDimensions()</strong> API is the most frequently used API for default dimensions. It should be called whenever a new default dimension must be created from two to four other default dimensions. If more than four default dimensions must be merged, this API can be called multiple times. In this case, the result of the previous call should be used as the first parameter for each subsequent call. This method will blindly merge all values, regardless of whether they are valid.</p>
<p><strong>Example: DimensionDefaultFacade::serviceMergeDefaultDimensions()</strong></p>
<pre><code class="lang-xpp">public static DimensionDefault serviceMergeDefaultDimensions(
    DimensionDefault _value1,
    DimensionDefault _value2,
    DimensionDefault _value3 = 0,
    DimensionDefault _value4 = 0)
</code></pre>
<h4 id="servicereplaceattributevalue">serviceReplaceAttributeValue()</h4>
<p>The <strong>serviceReplaceAttributeValue()</strong> API is useful if a single dimension value must be copied from one default set to another default set. The specified value will replace whatever value already exists in the source set.</p>
<p><strong>Example: DimensionDefaultFacade::serviceReplaceAttributeValue()</strong></p>
<pre><code class="lang-xpp">public static DimensionDefault serviceReplaceAttributeValue(
    DimensionDefault _target,
    DimensionDefault _source,
    RecId _dimensionAttributeId)
</code></pre>
<h4 id="servicemergevaliddefaultdimensions">serviceMergeValidDefaultDimensions()</h4>
<p>The <strong>serviceMergeValidDefaultDimensions()</strong> API is useful if you want the merge to merge only values that are valid for the current ledger. It works just like <strong>serviceMergeDefaultDimensions</strong> but includes a check for valid values.</p>
<p><strong>Example: DimensionDefaultFacade::serviceMergeValidDefaultDimensions()</strong></p>
<pre><code class="lang-xpp">public static DimensionDefault serviceMergeValidDefaultDimensions(
    DimensionDefault _defaultDimension1,
    DimensionDefault _defaultDimension2,
    DimensionDefault _defaultDimension3 = 0,
    DimensionDefault _defaultDimension4 = 0)
</code></pre>
<h3 id="ledger-dimensions">Ledger dimensions</h3>
<h4 id="servicecreateledgerdimension">serviceCreateLedgerDimension()</h4>
<p>The <strong>serviceCreateLedgerDimension()</strong> API is the most frequently used API for ledger dimensions. It should be called whenever a new ledger account combination must be created from a default account or an existing ledger account combination and zero to three default dimensions. If more than three default dimensions must be merged, this API can be called multiple times. In this case, different sources take the result of the previous call as the first parameter for each subsequent call. The MainAccount dimension is retrieved only from the ledger dimension that is supplied.</p>
<p><strong>Example: LedgerDimensionFacade.serviceCreateLedgerDimension()</strong></p>
<pre><code class="lang-xpp">public static LedgerDimensionAccount serviceCreateLedgerDimension(
    RecId            _ledgerDimensionId,
    DimensionDefault _dimensionDefault1 = 0,
    DimensionDefault _dimensionDefault2 = 0,
    DimensionDefault _dimensionDefault3 = 0)
    {
</code></pre>
<h4 id="servicecreateledgerdimensionfortype">serviceCreateLedgerDimensionForType()</h4>
<p>The <strong>serviceCreateLedgerDimensionForType()</strong> API resembles the <strong>serviceCreateLedgerDimension()</strong> API. However, instead of creating a ledger account combination, it can create other ledger dimension types, such as budget accounts or budget planning accounts. The <strong>LedgerDimensionType</strong> parameter is used to specify the type of ledger account that is created.</p>
<p><strong>Example: LedgerDimensionFacade.serviceCreateLedgerDimensionForType()</strong></p>
<pre><code class="lang-xpp">public static LedgerDimensionBase serviceCreateLedgerDimensionForType(
    LedgerDimensionType _ledgerDimensionType,
    LedgerDimensionBase _ledgerDimensionId,
    DimensionDefault    _dimensionDefault1 = 0,
    DimensionDefault    _dimensionDefault2 = 0,
    DimensionDefault    _dimensionDefault3 = 0)
</code></pre>
<h4 id="servicecreateledgerdimfordefaultdim">serviceCreateLedgerDimForDefaultDim()</h4>
<p>The <strong>serviceCreateLedgerDimForDefaultDim()</strong> API resembles the <strong>serviceCreateLedgerDimension()</strong> and <strong>serviceCreateLedgerDimensionForType()</strong> APIs, but the values from the default dimension are copied directly to the new ledger dimension, whereas the dimension values from the ledger dimension are merged afterwards. (By contrast, for the previous two APIs, the ledger dimension values were copied, and the default dimension values were merged.)</p>
<p><strong>Example: LedgerDimensionFacade::serviceCreateLedgerDimForDefaultDim()</strong></p>
<pre><code class="lang-xpp">public static LedgerDimensionBase serviceCreateLedgerDimForDefaultDim(
    DimensionDefault    _defaultDimension,
    LedgerDimensionBase _ledgerDimensionId)
</code></pre>
<h4 id="serviceledgerdimensionfromledgerdims">serviceLedgerDimensionFromLedgerDims()</h4>
<p>The <strong>serviceLedgerDimensionFromLedgerDims()</strong> API resembles the previous APIs, but it uses only ledger dimensions as sources to construct a new ledger dimension. The main account is retrieved only from the first ledger dimension.</p>
<p><strong>Example LedgerDimensionFacade::serviceLedgerDimensionFromLedgerDims()</strong></p>
<pre><code class="lang-xpp">public static LedgerDimensionAccount serviceLedgerDimensionFromLedgerDims(
    LedgerDimensionBase _ledgerDimensionId1,
    LedgerDimensionBase _ledgerDimensionId2 = 0,
    LedgerDimensionBase _ledgerDimensionId3 = 0,
    LedgerDimensionBase _ledgerDimensionId4 = 0,
    LedgerDimensionBase _ledgerDimensionId5 = 0)
</code></pre>
<h4 id="servicemergeledgerdimensions">serviceMergeLedgerDimensions()</h4>
<p>The <strong>serviceMergeLedgerDimensions()</strong> API resembles the <strong>serviceLedgerDimensionFromLedgerDims()</strong> API, but it's optimized to combine just two ledger dimensions.</p>
<p><strong>Example: LedgerDimensionFacade::serviceMergeLedgerDimensions()</strong></p>
<pre><code class="lang-xpp">public static LedgerDimensionBase serviceMergeLedgerDimensions(
    LedgerDimensionBase _ledgerDimension1,
    LedgerDimensionBase _ledgerDimension2,
    LedgerDimensionType _ledgerDimensionType = LedgerDimensionType::Account)
</code></pre>
<h4 id="servicecreateledgerdimfromledgerdim">serviceCreateLedgerDimFromLedgerDim()</h4>
<p>The <strong>serviceCreateLedgerDimFromLedgerDim()</strong> API is useful if you want to copy ledger dimensions from a historic posted document to a new unposted document, and you want to make sure that the current account structure configuration is used. In this way, you help prevent validation errors when the new ledger dimensions are validated during posting.</p>
<p><strong>Example: LedgerDimensionFacade::serviceCreateLedgerDimFromLedgerDim()</strong></p>
<pre><code class="lang-xpp">public static LedgerDimensionAccount serviceCreateLedgerDimFromLedgerDim(LedgerDimensionAccount _ledgerDimension)
</code></pre>
[!include[footer-include](../../../includes/footer-banner.md)]</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <span>Customized Footer</span>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
